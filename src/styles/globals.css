@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* ── Thème Sombre (défaut) — tuples RGB pour les modificateurs d'opacité Tailwind ── */
  :root,
  [data-theme="dark"] {
    --c-bg:          5 5 5;
    --c-bg-dark:     15 17 21;
    --c-bg-darker:   8 10 13;
    --c-surface:     22 27 34;
    --c-border:      33 38 45;
    --c-muted:       48 54 61;
    --c-text:        240 246 252;
    --c-text-muted:  139 148 158;
    --c-accent:      88 166 255;
    --c-accent-glow: 31 111 235;
  }

  /* ── Thème Clair — fond clair, toutes les surfaces restent dark mode ── */
  [data-theme="light"] {
    /* Seul le fond principal change — canvas bleu clair */
    --c-bg:          230 238 255;   /* #e6eeff — fond principal bleu doux */
    /* Tout le reste IDENTIQUE au dark mode */
    --c-bg-dark:     15 17 21;
    --c-bg-darker:   8 10 13;
    --c-surface:     22 27 34;
    --c-border:      33 38 45;
    --c-muted:       48 54 61;
    /* Texte par défaut sombre (lisible sur fond clair) */
    --c-text:        17 24 39;
    --c-text-muted:  71 85 105;
    /* Accent légèrement plus sombre pour contraste sur fond clair */
    --c-accent:      37 99 235;
    --c-accent-glow: 29 78 216;
  }

  /*
   * Réhéritage : à l'intérieur de toute surface sombre (bg-brand-dark,
   * bg-brand-surface, bg-brand-darker), on restaure les couleurs dark mode
   * via héritage CSS — les cartes, nav, footer, sections sombres
   * retrouvent automatiquement leur texte blanc et accent bleu clair.
   */
  [data-theme="light"] [class*="bg-brand-dark"],
  [data-theme="light"] [class*="bg-brand-surface"],
  [data-theme="light"] [class*="bg-brand-darker"] {
    --c-text:        240 246 252;
    --c-text-muted:  139 148 158;
    --c-accent:      88 166 255;
    --c-accent-glow: 31 111 235;
  }

  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* ── Smooth scroll offset — compense la navbar fixe (h-16 = 4rem) ── */
  section[id] {
    scroll-margin-top: 4.5rem;
  }

  body {
    @apply bg-brand-black text-brand-white;
    font-family: var(--font-sans), system-ui, sans-serif;
    font-size: 16px;
    line-height: 1.7;
    letter-spacing: -0.011em;
    font-feature-settings: "cv11", "ss01", "ss03";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  * {
    @apply border-brand-border;
    box-sizing: border-box;
  }

  ::selection {
    @apply bg-brand-accent/20 text-brand-white;
  }

  ::-webkit-scrollbar {
    width: 4px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-brand-darker;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-brand-muted rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-brand-accent/60;
  }

  /* ── Titres globaux style Linear / Raycast ────────────────── */
  h1, h2, h3, h4 {
    font-family: var(--font-sans), system-ui, sans-serif;
    font-feature-settings: "cv11", "ss01";
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }
}

@layer components {
  /* Glass morphism — WHITEBOXAi signature */
  .glass {
    @apply bg-white/[0.03] backdrop-blur-sm border border-white/[0.06];
  }

  .glass-hover {
    @apply hover:bg-white/[0.06] hover:border-white/[0.1] transition-all duration-300;
  }

  /* Glow bicolore */
  .glow-blue {
    box-shadow: 0 0 40px rgba(88, 166, 255, 0.15);
  }

  .glow-blue-hover:hover {
    box-shadow: 0 0 60px rgba(88, 166, 255, 0.25);
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-gradient-to-r from-white via-brand-accent to-brand-accent/70 bg-clip-text text-transparent;
  }

  /* En mode clair (sections canvas), le dégradé part de l'accent (blanc invisible sur fond clair) */
  [data-theme="light"] .gradient-text {
    @apply from-brand-accent via-brand-accent-glow to-brand-accent/70;
  }
  /* Dans les surfaces sombres en mode clair — restaure le dégradé blanc→bleu d'origine */
  [data-theme="light"] [class*="bg-brand-dark"] .gradient-text,
  [data-theme="light"] [class*="bg-brand-surface"] .gradient-text,
  [data-theme="light"] [class*="bg-brand-darker"] .gradient-text {
    @apply from-white via-brand-accent to-brand-accent/70;
  }

  /* Bento Grid cards */
  .bento-card {
    @apply glass glass-hover rounded-2xl p-6 transition-all duration-300 cursor-pointer;
  }

  /* Section padding standard */
  .section-padding {
    @apply py-20 px-4 md:px-8 lg:px-16 xl:px-24;
  }

  /* Container max-width */
  .container-max {
    @apply max-w-7xl mx-auto;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .animate-in {
    animation: fade-up 0.5s ease-out forwards;
  }
}
